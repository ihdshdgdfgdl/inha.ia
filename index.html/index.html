<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Minha IA PRO Refinada</title>

<style>
body{background:#0f172a;color:white;font-family:Arial;text-align:center;}
#app{max-width:800px;margin:auto;}
#chat{background:#1e293b;height:450px;overflow-y:auto;padding:15px;border-radius:10px;}
.user{color:#38bdf8;text-align:right;margin:6px;}
.bot{color:#22c55e;text-align:left;margin:6px;}
input{width:70%;padding:10px;border-radius:5px;}
button{padding:10px;border-radius:5px;background:#22c55e;border:none;margin:5px;}
#menu button{background:#334155;}
</style>
</head>

<body>
<div id="app">
<h2>ü§ñ Minha IA PRO</h2>

<div id="menu">
<button onclick="ajuda()">Ajuda</button>
<button onclick="exemplos()">Exemplos</button>
<button onclick="limpar()">Limpar</button>
</div>

<div id="chat"></div>

<input id="pergunta" placeholder="Digite sua pergunta">
<button onclick="enviar()">Enviar</button>
</div>

<script>
const API_KEY = "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";

// ================= UTILIDADES =================
function mostrar(texto, classe){
  let chat=document.getElementById("chat");
  chat.innerHTML+=`<div class="${classe}">${texto}</div>`;
  chat.scrollTop=chat.scrollHeight;
  salvarHistorico();
}

function salvarHistorico(){
  localStorage.setItem("chat",document.getElementById("chat").innerHTML);
}

function carregarHistorico(){
  let h=localStorage.getItem("chat");
  if(h) document.getElementById("chat").innerHTML=h;
}
carregarHistorico();

function limpar(){
  document.getElementById("chat").innerHTML="";
  localStorage.removeItem("chat");
}

// ================= MENUS =================
function ajuda(){
  mostrar("IA: Posso conversar, fazer c√°lculos, tabuada, explicar palavras, hist√≥ria, geografia e pesquisar informa√ß√µes.","bot");
}

function exemplos(){
  mostrar("IA: Exemplos ‚Üí 2+2 | tabuada do 6 | significado de amor | quem foi dom pedro | o que √© geografia","bot");
}

// ================= MATEM√ÅTICA =================
function calcular(txt){
  try{
    if(txt.match(/[0-9]+[\+\-\*\/][0-9]+/)){
      return eval(txt);
    }
  }catch{}
  return null;
}

function tabuada(txt){
  if(txt.includes("tabuada")){
    let n=parseInt(txt.replace("tabuada do","").trim());
    if(isNaN(n)) return null;
    let r="";
    for(let i=1;i<=10;i++){
      r+=`${n} x ${i} = ${n*i}<br>`;
    }
    return r;
  }
  return null;
}

// ================= DICION√ÅRIO =================
const dicionario={
"amor":"Sentimento de carinho profundo.",
"amizade":"Rela√ß√£o de afeto entre pessoas.",
"matem√°tica":"Ci√™ncia dos n√∫meros.",
"geografia":"Estudo da Terra.",
"hist√≥ria":"Estudo do passado."
};

// ================= RESPOSTAS FIXAS =================
const respostas={
"oi":"Ol√°! Eu sou sua IA PRO.",
"ol√°":"Oi! Como posso ajudar?",
"quem √© voc√™":"Sou uma intelig√™ncia artificial criada por voc√™.",
"o que voc√™ faz":"Respondo perguntas, fa√ßo contas e pesquiso informa√ß√µes.",
"bom dia":"Bom dia! Em que posso ajudar?",
"boa tarde":"Boa tarde!",
"boa noite":"Boa noite!"
};

// ================= DATA E HORA =================
function dataHora(){
  let d=new Date();
  return d.toLocaleString("pt-BR");
}

// ================= API IA =================
async function pesquisarIA(pergunta){
  const response = await fetch(
    "https://api-inference.huggingface.co/models/google/flan-t5-base",
    {
      method:"POST",
      headers:{
        "Authorization":"Bearer "+API_KEY,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({inputs:pergunta})
    }
  );
  const data = await response.json();
  return data[0].generated_text;
}

// ================= MOTOR PRINCIPAL =================
async function enviar(){
  let txt=document.getElementById("pergunta").value.toLowerCase().trim();
  document.getElementById("pergunta").value="";
  mostrar("Voc√™: "+txt,"user");

  if(respostas[txt]){
    mostrar("IA: "+respostas[txt],"bot"); return;
  }

  if(txt=="hora"||txt=="data"){
    mostrar("IA: "+dataHora(),"bot"); return;
  }

  let calc=calcular(txt);
  if(calc!==null){
    mostrar("IA: Resultado = "+calc,"bot"); return;
  }

  let tab=tabuada(txt);
  if(tab){
    mostrar("IA:<br>"+tab,"bot"); return;
  }

  if(txt.startsWith("significado de")){
    let p=txt.replace("significado de","").trim();
    if(dicionario[p]){
      mostrar("IA: "+dicionario[p],"bot"); return;
    }
  }

  mostrar("IA: Pesquisando...","bot");
  let resp=await pesquisarIA(txt);
  mostrar("IA: "+resp,"bot");
}

// ================= FUTURA ATUALIZA√á√ÉO =================
// Espa√ßo reservado para novas fun√ß√µes futuras sem quebrar o sistema
</script>

</body>
</html>

