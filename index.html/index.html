<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Minha IA com Pesquisa</title>
<style>
body{background:#0f172a;color:white;font-family:Arial;text-align:center;}
#chat{background:#1e293b;height:400px;overflow-y:auto;padding:10px;border-radius:10px;}
.user{color:#38bdf8;text-align:right;margin:5px;}
.bot{color:#22c55e;text-align:left;margin:5px;}
input{width:70%;padding:10px;border-radius:5px;}
button{padding:10px;border-radius:5px;background:#22c55e;border:none;}
</style>
</head>
<body>

<h2>ðŸ¤– Minha IA</h2>
<div id="chat"></div><br>

<input id="pergunta" placeholder="Digite sua pergunta">
<button onclick="enviar()">Enviar</button>

<script>
const API_KEY = "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";

function mostrar(texto, classe){
  let chat=document.getElementById("chat");
  chat.innerHTML+=`<div class="${classe}">${texto}</div>`;
  chat.scrollTop=chat.scrollHeight;
}

// ðŸ”¹ Pesquisa REAL na Wikipedia
async function pesquisarWiki(pergunta){
  let url="https://pt.wikipedia.org/api/rest_v1/page/summary/"+encodeURIComponent(pergunta);
  let r=await fetch(url);
  let d=await r.json();
  return d.extract || "NÃ£o encontrei resultado na internet.";
}

// ðŸ”¹ Pesquisa IA (Hugging Face)
async function pesquisarIA(pergunta){
  const response = await fetch(
    "https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.2",
    {
      method:"POST",
      headers:{
        "Authorization":"Bearer "+API_KEY,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({
        inputs:"Responda em portuguÃªs: "+pergunta
      })
    }
  );
  const data = await response.json();
  return data[0].generated_text;
}

async function enviar(){
  let txt=document.getElementById("pergunta").value;
  document.getElementById("pergunta").value="";
  mostrar("VocÃª: "+txt,"user");

  mostrar("IA: Pesquisando na internet...","bot");

  // primeiro tenta Wikipedia (internet real)
  let wiki = await pesquisarWiki(txt);
  if(wiki && wiki.length > 50){
    mostrar("IA (Wikipedia): "+wiki,"bot");
    return;
  }

  // se nÃ£o achar, usa IA
  let ia = await pesquisarIA(txt);
  mostrar("IA: "+ia,"bot");
}
</script>

</body>
</html>
