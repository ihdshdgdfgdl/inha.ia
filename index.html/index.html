<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Minha IA Escolar</title>
  <style>
    body {
      background: #0f172a;
      color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #020617;
      padding: 15px;
      text-align: center;
      font-size: 24px;
    }
    #chat {
      height: 60vh;
      overflow-y: auto;
      padding: 15px;
      border-top: 1px solid #334155;
      border-bottom: 1px solid #334155;
    }
    .user {
      color: #38bdf8;
      margin: 5px;
      text-align: right;
    }
    .bot {
      color: #22c55e;
      margin: 5px;
      text-align: left;
    }
    footer {
      display: flex;
      padding: 10px;
      background: #020617;
    }
    input {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
    }
    button {
      padding: 10px;
      background: #22c55e;
      border: none;
      color: black;
      font-weight: bold;
      border-radius: 5px;
      margin-left: 10px;
    }
    .saved-texts {
      margin: 10px;
      padding: 10px;
      border: 1px solid #334155;
      background: #1e293b;
    }
  </style>
</head>
<body>

  <header>ðŸ¤– Minha IA Escolar</header>
  <div id="chat"></div>
  <footer>
    <input id="input" placeholder="Digite sua pergunta ou texto para salvar">
    <button onclick="enviar()">Enviar</button>
  </footer>
  <div class="saved-texts">
    <h3>Textos Salvos</h3>
    <div id="savedList"></div>
  </div>

<script>
// Base de conhecimento inicial
const baseConhecimento = {
  "oi": "OlÃ¡! Eu sou sua IA escolar. Pergunte o que quiser sobre matÃ©rias bÃ¡sicas.",
  "quem Ã© vocÃª": "Sou uma inteligÃªncia artificial criada para ajudar com temas escolares.",
  "tabuada do 2": "Tabuada do 2: 2x1=2, 2x2=4, 2x3=6, 2x4=8, 2x5=10",
  "tabuada do 3": "Tabuada do 3: 3x1=3, 3x2=6, 3x3=9, 3x4=12, 3x5=15",
  "capital do brasil": "A capital do Brasil Ã© BrasÃ­lia.",
  "quem foi dom pedro": "Dom Pedro I foi o primeiro imperador do Brasil, proclamando a independÃªncia em 1822."
};

// FunÃ§Ã£o para adicionar mensagem no chat
function adicionarMensagem(texto, classe) {
  let chat = document.getElementById("chat");
  let msg = document.createElement("div");
  msg.className = classe;
  msg.innerText = texto;
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
}

// FunÃ§Ã£o para salvar texto no LocalStorage
function salvarTexto(texto) {
  let textosSalvos = JSON.parse(localStorage.getItem('textosSalvos')) || [];
  textosSalvos.push(texto);
  localStorage.setItem('textosSalvos', JSON.stringify(textosSalvos));
  atualizarLista();
}

// FunÃ§Ã£o para atualizar lista de textos salvos na tela
function atualizarLista() {
  let lista = document.getElementById('savedList');
  lista.innerHTML = '';
  let textosSalvos = JSON.parse(localStorage.getItem('textosSalvos')) || [];
  textosSalvos.forEach((texto, index) => {
    let item = document.createElement('div');
    item.innerText = (index + 1) + '. ' + texto;
    lista.appendChild(item);
  });
}

// FunÃ§Ã£o principal ao enviar
function enviar() {
  let input = document.getElementById("input");
  let pergunta = input.value.trim().toLowerCase();
  if (pergunta === "") return;
  
  adicionarMensagem("VocÃª: " + pergunta, "user");
  
  // Se for adicionar texto ao banco de dados local
  if (pergunta.startsWith("salvar:")) {
    let textoParaSalvar = pergunta.replace("salvar:", "").trim();
    if (textoParaSalvar) {
      salvarTexto(textoParaSalvar);
      adicionarMensagem("IA: Texto salvo com sucesso!", "bot");
    } else {
      adicionarMensagem("IA: Por favor, insira um texto para salvar.", "bot");
    }
  } 
  // Se for uma pergunta, primeiro busca na base
  else if (baseConhecimento[pergunta]) {
    adicionarMensagem("IA: " + baseConhecimento[pergunta], "bot");
  } 
  // Busca nos textos salvos no LocalStorage
  else {
    let textosSalvos = JSON.parse(localStorage.getItem('textosSalvos')) || [];
    let resposta = textosSalvos.find(texto => texto.toLowerCase().includes(pergunta));
    if (resposta) {
      adicionarMensagem("IA: " + resposta, "bot");
    } else {
      // Aqui Ã© onde vocÃª pode inserir a lÃ³gica de API
      adicionarMensagem("IA: NÃ£o sei a resposta. Tente me ensinar ou pergunte outra coisa.", "bot");
      
      // Exemplo de chamada API (comentado, pronto para vocÃª inserir)
      /*
      fetch('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', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          // Se precisar de chave, coloque aqui
          // 'Authorization': 'Bearer SUA_CHAVE'
        },
        body: JSON.stringify({ pergunta: pergunta })
      })
      .then(response => response.json())
      .then(data => {
        if (data.resposta) {
          adicionarMensagem("IA: " + data.resposta, "bot");
        } else {
          adicionarMensagem("IA: NÃ£o encontrei uma resposta online.", "bot");
        }
      })
      .catch(error => {
        adicionarMensagem("IA: Erro na pesquisa online.", "bot");
        console.error(error);
      });
      */
    }
  }
  
  input.value = "";
}

// Inicializa a lista de textos salvos ao carregar
atualizarLista();
</script>

</body>
</html>
